platform: mqtt
schema: template
name: "Landscape Light 3"
unique_id: Shelly_Landscape_Light_3
command_topic: 'shellies/LandscapeLight3/color/0/set'
state_topic: 'shellies/LandscapeLight3/color/0/status'
effect_list:
  - "Off"
  - "Meteor Shower"
  - "Gradual Change"
  - "Flash"
command_on_template: >
  { "turn": "on", 
  {% if brightness is defined %}, "gain": {{brightness|float|multiply(0.3922)|round}}, {% endif %} 
  {% if red is defined%} "red": {{red}}, {% endif %} 
  {% if green is defined%} "green": {{green}}, {% endif %} 
  {% if blue is defined%} "blue": {{blue}}, {% endif %} 
  {% if effect is defined %} 
    {% if effect=="Meteor Shower" %} "effect": 1,
    {% elif effect=="Gradual Change" %} "effect": 2,
    {% elif effect=="Flash" %} "effect": 3,
    {% else %} "effect": 0,
    {% endif %} 
    {% else %} "effect": 0,
  {% endif %}

  }
command_off_template: '{ "turn": "off" }'
state_template: '{% if value_json.ison %}on{% else %}off{% endif %}'
brightness_template: '{{value_json.gain|float|multiply(2.55)|round}}'
red_template: '{{value_json.red}}'
green_template: '{{value_json.green}}'
blue_template: '{{value_json.blue}}'
effect_template: '{%if value_json.effect==1%}Meteor Shower{%elif value_json.effect==2%}Gradual Change{%elif value_json.effect==3%}Flash{%else%}Off{%endif%}'

